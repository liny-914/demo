System.register(["./vendor-vue-legacy-DdA7y_z9.js","./vendor-echarts-legacy-C0Vknu-9.js","./view-detail.vue_vue_type_style_index_0_scoped_fa9bc995_lang.css-legacy-CPPAxRKO.js"],(function(e,a){"use strict";var t,l,r,i,n,o,s,c,u,d,h,v,p,f,y,g,m,b,D,_,w,x,k,S,W;return{setters:[e=>{t=e.aJ,l=e.aK,r=e.aL,i=e.aM,n=e.aN,o=e.V,s=e.aO,c=e.aP,u=e.aQ,d=e.aR,h=e.aS,v=e.aT,p=e.aU,f=e.aV,y=e.aW},e=>{g=e.u,m=e.i,b=e.a,D=e.b,_=e.c,w=e.d,x=e.e,k=e.f,S=e.g,W=e.h},null],execute:function(){const a=e("a",{__name:"LineChart",props:{chartData:{type:Object,required:!0}},setup(e){g([b,D,_,w]);const a=e,s=t(null);let c=null;const u=()=>{if(!s.value)return;c||(c=m(s.value));const e={tooltip:{trigger:"axis"},xAxis:{type:"category",data:a.chartData.dates},yAxis:{type:"value",name:"用电量 (kWh)"},series:[{data:a.chartData.values,type:"line",smooth:!0,areaStyle:{color:new o(0,0,0,1,[{offset:0,color:"rgba(58, 77, 233, 0.8)"},{offset:1,color:"rgba(58, 77, 233, 0.1)"}])},itemStyle:{color:"#3a4de9"}}]};c.setOption(e)};l((()=>{u(),window.addEventListener("resize",d)}));const d=()=>{c?.resize()};return r((()=>a.chartData),(()=>{u()}),{deep:!0}),(e,a)=>(n(),i("div",{ref_key:"chartRef",ref:s,style:{width:"100%",height:"300px"}},null,512))}}),z=e("b",{__name:"PieChart",props:{chartData:{type:Array,required:!0,default:()=>[]},title:{type:String,default:""},radius:{type:Array,default:()=>["50%","70%"]}},setup(e){g([x,D,k,w,S]);const a=e,o=t(null);let c=null;const u=()=>{if(!o.value||!a.chartData.length)return;c||(c=m(o.value));const e=["#3ba272","#4cabcf","#e5323e","#f9c956","#b15cff","#fc8452","#91cc75","#fac858","#ee6666"],t={title:{text:a.title,left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,data:a.chartData.map((e=>e.name))},series:[{name:"能耗占比",type:"pie",radius:a.radius,avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2,color:a=>e[a.dataIndex%e.length]},label:{show:!0,formatter:"{b}: {d}%"},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold"}},labelLine:{show:!0},data:a.chartData}]};c.setOption(t)};l((()=>{u(),window.addEventListener("resize",d)})),s((()=>{window.removeEventListener("resize",d),c?.dispose()}));const d=()=>{c?.resize()};return r((()=>a.chartData),(()=>{u()}),{deep:!0}),(e,a)=>(n(),i("div",{ref_key:"chartRef",ref:o,style:{width:"100%",height:"300px"}},null,512))}}),L=e("_",((e,a)=>{const t=e.__vccOpts||e;for(const[l,r]of a)t[l]=r;return t})),A={__name:"BarChart",props:{chartData:{type:Array,required:!0,default:()=>[]},title:{type:String,default:""},color:{type:String,default:"#5470c6"}},setup(e){g([W,S,D,_,w]);const a=e,c=t(null);let u=null;const d=()=>{if(!c.value||!a.chartData.length)return;u||(u=m(c.value));const e={title:{text:a.title,left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>`${e[0].name}<br/>能耗: ${e[0].value} kWh`},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:a.chartData.map((e=>e.name)),axisLabel:{interval:0,rotate:a.chartData.length>5?30:0}},yAxis:{type:"value",name:"能耗 (kWh)",nameLocation:"middle",nameGap:30},series:[{data:a.chartData.map((e=>e.value)),type:"bar",barWidth:"60%",itemStyle:{color:a.color,borderRadius:[4,4,0,0]},label:{show:!0,position:"top",formatter:"{c} kWh"},emphasis:{itemStyle:{color:new o(0,0,0,1,[{offset:0,color:a.color},{offset:1,color:"#83bff6"}])}}}]};u.setOption(e)};l((()=>{d(),window.addEventListener("resize",h)})),s((()=>{window.removeEventListener("resize",h),u?.dispose()}));const h=()=>{u?.resize()};return r((()=>a.chartData),(()=>{d()}),{deep:!0}),(e,a)=>(n(),i("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"300px"}},null,512))}},E={class:"detail-container"},O={class:"header"},C={class:"controls"},j={class:"building-info"},R={class:"info-card"},P={class:"info-card"},q={class:"highlight"},B={class:"highlight"},I={class:"info-card"},V={class:"highlight"},$={class:"highlight"},M={class:"chart-section"},N={class:"chart-wrapper"},T={key:1,class:"loading"},U={class:"chart-wrapper"},G={key:1,class:"loading"},J={class:"chart-wrapper"},K={key:1,class:"loading"},Q={class:"chart-wrapper"},F={key:1,class:"loading"},H=L({__name:"Detail",setup(e){const r=y(),o=t(!0),s=t("教学楼A"),g=t("A"),m=t({area:0,rooms:0,year:"",todayElectricity:"0",todayWater:"0",monthElectricity:"0",monthWater:"0"}),b=t({dates:[],values:[]}),D=t({dates:[],values:[]}),_=t([]),w=t([]),x=async()=>{try{o.value=!0;const e=`/api/data${g.value}`,a=(await f.get(e)).data.data;s.value=a.buildingName,m.value=a.buildingInfo,b.value=a.electricityData,D.value=a.waterData,_.value=a.roomData,w.value=a.timeData}catch(e){}finally{o.value=!1}};l((()=>{x()}));const k=()=>{r.push("/")};return(e,t)=>(n(),i("div",E,[c("div",O,[c("h1",null,u(s.value)+" 能耗详情",1),c("div",C,[d(c("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),onChange:x,class:"building-select"},t[1]||(t[1]=[c("option",{value:"A"},"教学楼A",-1),c("option",{value:"B"},"教学楼B",-1),c("option",{value:"C"},"教学楼C",-1),c("option",{value:"D"},"教学楼D",-1)]),544),[[h,g.value]]),c("button",{onClick:k,class:"back-button"},"返回总览")])]),c("div",j,[c("div",R,[t[2]||(t[2]=c("h3",null,"基本信息",-1)),c("p",null,"楼宇面积: "+u(m.value.area)+" m²",1),c("p",null,"教室数量: "+u(m.value.rooms)+" 间",1),c("p",null,"建成时间: "+u(m.value.year),1)]),c("div",P,[t[5]||(t[5]=c("h3",null,"今日能耗",-1)),c("p",null,[t[3]||(t[3]=v("用电量: ")),c("span",q,u(m.value.todayElectricity)+" kWh",1)]),c("p",null,[t[4]||(t[4]=v("用水量: ")),c("span",B,u(m.value.todayWater)+" m³",1)])]),c("div",I,[t[8]||(t[8]=c("h3",null,"本月统计",-1)),c("p",null,[t[6]||(t[6]=v("总用电量: ")),c("span",V,u(m.value.monthElectricity)+" kWh",1)]),c("p",null,[t[7]||(t[7]=v("总用水量: ")),c("span",$,u(m.value.monthWater)+" m³",1)])])]),c("div",M,[c("div",N,[t[9]||(t[9]=c("h2",null,"用电量趋势 (本月)",-1)),o.value?(n(),i("div",T,"加载中...")):(n(),p(a,{key:0,chartData:b.value},null,8,["chartData"]))]),c("div",U,[t[10]||(t[10]=c("h2",null,"用水量趋势 (本月)",-1)),o.value?(n(),i("div",G,"加载中...")):(n(),p(a,{key:0,chartData:D.value},null,8,["chartData"]))]),c("div",J,[t[11]||(t[11]=c("h2",null,"教室能耗分布",-1)),o.value?(n(),i("div",K,"加载中...")):(n(),p(A,{key:0,chartData:_.value},null,8,["chartData"]))]),c("div",Q,[t[12]||(t[12]=c("h2",null,"时段用电分析",-1)),o.value?(n(),i("div",F,"加载中...")):(n(),p(z,{key:0,chartData:w.value},null,8,["chartData"]))])])]))}},[["__scopeId","data-v-fa9bc995"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));e("D",X)}}}));
