import{aJ as a,aK as e,aL as t,aM as l,aN as r,V as s,aO as i,aP as o,aQ as n,aR as c,aS as u,aT as d,aU as h,aV as p,aW as v}from"./vendor-vue-BoMZVBU-.js";import{u as f,i as y,a as m,b as g,c as b,d as D,e as _,f as w,g as x,h as k}from"./vendor-echarts-BIGDTPIk.js";/* empty css                                                                        */const S={__name:"LineChart",props:{chartData:{type:Object,required:!0}},setup(i){f([m,g,b,D]);const o=i,n=a(null);let c=null;const u=()=>{if(!n.value)return;c||(c=y(n.value));const a={tooltip:{trigger:"axis"},xAxis:{type:"category",data:o.chartData.dates},yAxis:{type:"value",name:"用电量 (kWh)"},series:[{data:o.chartData.values,type:"line",smooth:!0,areaStyle:{color:new s(0,0,0,1,[{offset:0,color:"rgba(58, 77, 233, 0.8)"},{offset:1,color:"rgba(58, 77, 233, 0.1)"}])},itemStyle:{color:"#3a4de9"}}]};c.setOption(a)};e((()=>{u(),window.addEventListener("resize",d)}));const d=()=>{null==c||c.resize()};return t((()=>o.chartData),(()=>{u()}),{deep:!0}),(a,e)=>(r(),l("div",{ref_key:"chartRef",ref:n,style:{width:"100%",height:"300px"}},null,512))}},W={__name:"PieChart",props:{chartData:{type:Array,required:!0,default:()=>[]},title:{type:String,default:""},radius:{type:Array,default:()=>["50%","70%"]}},setup(s){f([_,g,w,D,x]);const o=s,n=a(null);let c=null;const u=()=>{if(!n.value||!o.chartData.length)return;c||(c=y(n.value));const a=["#3ba272","#4cabcf","#e5323e","#f9c956","#b15cff","#fc8452","#91cc75","#fac858","#ee6666"],e={title:{text:o.title,left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",bottom:0,data:o.chartData.map((a=>a.name))},series:[{name:"能耗占比",type:"pie",radius:o.radius,avoidLabelOverlap:!1,itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2,color:e=>a[e.dataIndex%a.length]},label:{show:!0,formatter:"{b}: {d}%"},emphasis:{label:{show:!0,fontSize:"14",fontWeight:"bold"}},labelLine:{show:!0},data:o.chartData}]};c.setOption(e)};e((()=>{u(),window.addEventListener("resize",d)})),i((()=>{window.removeEventListener("resize",d),null==c||c.dispose()}));const d=()=>{null==c||c.resize()};return t((()=>o.chartData),(()=>{u()}),{deep:!0}),(a,e)=>(r(),l("div",{ref_key:"chartRef",ref:n,style:{width:"100%",height:"300px"}},null,512))}},z=(a,e)=>{const t=a.__vccOpts||a;for(const[l,r]of e)t[l]=r;return t},L={__name:"BarChart",props:{chartData:{type:Array,required:!0,default:()=>[]},title:{type:String,default:""},color:{type:String,default:"#5470c6"}},setup(o){f([k,x,g,b,D]);const n=o,c=a(null);let u=null;const d=()=>{if(!c.value||!n.chartData.length)return;u||(u=y(c.value));const a={title:{text:n.title,left:"center",textStyle:{fontSize:14,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:a=>"".concat(a[0].name,"<br/>能耗: ").concat(a[0].value," kWh")},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:n.chartData.map((a=>a.name)),axisLabel:{interval:0,rotate:n.chartData.length>5?30:0}},yAxis:{type:"value",name:"能耗 (kWh)",nameLocation:"middle",nameGap:30},series:[{data:n.chartData.map((a=>a.value)),type:"bar",barWidth:"60%",itemStyle:{color:n.color,borderRadius:[4,4,0,0]},label:{show:!0,position:"top",formatter:"{c} kWh"},emphasis:{itemStyle:{color:new s(0,0,0,1,[{offset:0,color:n.color},{offset:1,color:"#83bff6"}])}}}]};u.setOption(a)};e((()=>{d(),window.addEventListener("resize",h)})),i((()=>{window.removeEventListener("resize",h),null==u||u.dispose()}));const h=()=>{null==u||u.resize()};return t((()=>n.chartData),(()=>{d()}),{deep:!0}),(a,e)=>(r(),l("div",{ref_key:"chartRef",ref:c,style:{width:"100%",height:"300px"}},null,512))}},A={class:"detail-container"},E={class:"header"},O={class:"controls"},C={class:"building-info"},j={class:"info-card"},R={class:"info-card"},P={class:"highlight"},q={class:"highlight"},B={class:"info-card"},I={class:"highlight"},V={class:"highlight"},M={class:"chart-section"},N={class:"chart-wrapper"},T={key:1,class:"loading"},U={class:"chart-wrapper"},G={key:1,class:"loading"},J={class:"chart-wrapper"},K={key:1,class:"loading"},Q={class:"chart-wrapper"},F={key:1,class:"loading"},H=z({__name:"Detail",setup(t){const s=v(),i=a(!0),f=a("教学楼A"),y=a("A"),m=a({area:0,rooms:0,year:"",todayElectricity:"0",todayWater:"0",monthElectricity:"0",monthWater:"0"}),g=a({dates:[],values:[]}),b=a({dates:[],values:[]}),D=a([]),_=a([]),w=async()=>{try{i.value=!0;const a="/api/data".concat(y.value),e=(await p.get(a)).data.data;f.value=e.buildingName,m.value=e.buildingInfo,g.value=e.electricityData,b.value=e.waterData,D.value=e.roomData,_.value=e.timeData}catch(a){}finally{i.value=!1}};e((()=>{w()}));const x=()=>{s.push("/")};return(a,e)=>(r(),l("div",A,[o("div",E,[o("h1",null,n(f.value)+" 能耗详情",1),o("div",O,[c(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>y.value=a),onChange:w,class:"building-select"},e[1]||(e[1]=[o("option",{value:"A"},"教学楼A",-1),o("option",{value:"B"},"教学楼B",-1),o("option",{value:"C"},"教学楼C",-1),o("option",{value:"D"},"教学楼D",-1)]),544),[[u,y.value]]),o("button",{onClick:x,class:"back-button"},"返回总览")])]),o("div",C,[o("div",j,[e[2]||(e[2]=o("h3",null,"基本信息",-1)),o("p",null,"楼宇面积: "+n(m.value.area)+" m²",1),o("p",null,"教室数量: "+n(m.value.rooms)+" 间",1),o("p",null,"建成时间: "+n(m.value.year),1)]),o("div",R,[e[5]||(e[5]=o("h3",null,"今日能耗",-1)),o("p",null,[e[3]||(e[3]=d("用电量: ")),o("span",P,n(m.value.todayElectricity)+" kWh",1)]),o("p",null,[e[4]||(e[4]=d("用水量: ")),o("span",q,n(m.value.todayWater)+" m³",1)])]),o("div",B,[e[8]||(e[8]=o("h3",null,"本月统计",-1)),o("p",null,[e[6]||(e[6]=d("总用电量: ")),o("span",I,n(m.value.monthElectricity)+" kWh",1)]),o("p",null,[e[7]||(e[7]=d("总用水量: ")),o("span",V,n(m.value.monthWater)+" m³",1)])])]),o("div",M,[o("div",N,[e[9]||(e[9]=o("h2",null,"用电量趋势 (本月)",-1)),i.value?(r(),l("div",T,"加载中...")):(r(),h(S,{key:0,chartData:g.value},null,8,["chartData"]))]),o("div",U,[e[10]||(e[10]=o("h2",null,"用水量趋势 (本月)",-1)),i.value?(r(),l("div",G,"加载中...")):(r(),h(S,{key:0,chartData:b.value},null,8,["chartData"]))]),o("div",J,[e[11]||(e[11]=o("h2",null,"教室能耗分布",-1)),i.value?(r(),l("div",K,"加载中...")):(r(),h(L,{key:0,chartData:D.value},null,8,["chartData"]))]),o("div",Q,[e[12]||(e[12]=o("h2",null,"时段用电分析",-1)),i.value?(r(),l("div",F,"加载中...")):(r(),h(W,{key:0,chartData:_.value},null,8,["chartData"]))])])]))}},[["__scopeId","data-v-fa9bc995"]]),X=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{X as D,z as _,S as a,W as b};
